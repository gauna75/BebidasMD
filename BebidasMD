<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tienda de Bebidas ‚Ä¢ La Bodega</title>
  <meta name="description" content="Venta online de bebidas alcoh√≥licas. Compra f√°cil, entrega r√°pida. Debes ser mayor de edad." />

  <!-- Estilos (responsive, moderno, sin frameworks) -->
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#f59e0b;
      --muted:#94a3b8;
      --glass: rgba(255,255,255,0.03);
      --radius:12px;
      --max-width:1100px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: linear-gradient(180deg,#071124 0%, #03111a 100%);
      color:#e6eef8;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.35;
      padding:24px;
      display:flex;
      justify-content:center;
      align-items:flex-start;
      gap:20px;
    }

    .container{
      width:100%;
      max-width:var(--max-width);
      margin:0 auto;
    }

    header{
      display:flex;
      gap:16px;
      align-items:center;
      justify-content:space-between;
      margin-bottom:18px;
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .logo{
      width:56px;
      height:56px;
      border-radius:10px;
      background:linear-gradient(135deg,var(--accent),#ef4444);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      color:#071124;
      box-shadow:0 6px 18px rgba(0,0,0,0.6);
    }
    h1{font-size:1.15rem; margin:0}
    p.lead{color:var(--muted); margin:0; font-size:0.9rem}

    /* layout */
    .main{
      display:grid;
      grid-template-columns: 1fr 340px;
      gap:18px;
      align-items:start;
    }
    @media (max-width:880px){
      .main{grid-template-columns:1fr; padding-bottom:120px}
    }

    /* catalog */
    .controls{
      display:flex;
      gap:8px;
      align-items:center;
      margin-bottom:12px;
      flex-wrap:wrap;
    }
    .search{
      flex:1 1 240px;
      display:flex;
      gap:8px;
    }
    .search input{
      width:100%;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      background:var(--glass);
      color:inherit;
    }
    .select, .btn{
      padding:9px 12px;
      border-radius:10px;
      border: none;
      background:var(--card);
      color:inherit;
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(3,1fr);
      gap:14px;
    }
    @media (max-width:1100px){ .grid{grid-template-columns:repeat(2,1fr)} }
    @media (max-width:540px){ .grid{grid-template-columns:1fr} }

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:var(--radius);
      padding:12px;
      display:flex;
      gap:10px;
      align-items:flex-start;
      box-shadow: 0 6px 20px rgba(2,6,23,0.6);
      border:1px solid rgba(255,255,255,0.03);
    }
    .thumb{
      width:100px; height:100px; border-radius:8px; flex:0 0 100px;
      background-size:cover; background-position:center; background-color:#0b1220;
    }
    .meta{flex:1; display:flex; flex-direction:column; gap:8px}
    .title{font-weight:600}
    .price{font-weight:700; color:var(--accent)}
    .actions{display:flex; gap:8px; margin-top:auto; align-items:center}
    .actions button{padding:8px 10px; border-radius:10px; border:none; cursor:pointer; background:var(--accent); color:#071124; font-weight:600}
    .actions .add{background:var(--accent)}
    .tag{font-size:0.78rem; color:var(--muted)}

    /* sidebar / carrito */
    aside.cart{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding:14px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.03);
      position:sticky;
      top:24px;
      height:fit-content;
    }
    .cart h2{margin:0 0 8px 0}
    .cart-list{display:flex; flex-direction:column; gap:10px; max-height:460px; overflow:auto; padding-right:6px}
    .cart-item{display:flex; gap:10px; align-items:center}
    .cart-item .ci-thumb{width:48px;height:48px;border-radius:8px;background-size:cover;background-position:center}
    .ci-meta{flex:1}
    .qty{display:flex; gap:6px; align-items:center}
    .qty button{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:6px;border-radius:6px;color:inherit;cursor:pointer}
    .total{display:flex; justify-content:space-between; font-weight:700; margin-top:12px}
    .checkout{margin-top:12px; width:100%; padding:10px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--accent),#ef4444); color:#071124;font-weight:700;cursor:pointer}

    footer{margin-top:18px; color:var(--muted); font-size:0.85rem; text-align:center}

    /* modal edad */
    .modal-backdrop{
      position:fixed; inset:0; background:rgba(1,6,12,0.75); display:grid; place-items:center; z-index:9999;
    }
    .modal{
      width:100%;
      max-width:420px;
      background:linear-gradient(180deg,#071124,#061022);
      padding:22px; border-radius:14px; text-align:center; border:1px solid rgba(255,255,255,0.04);
    }
    .modal h3{margin:0 0 8px 0}
    .modal p{color:var(--muted); margin:0 0 18px 0}
    .modal .btns{display:flex; gap:10px; justify-content:center}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.08);padding:10px 12px;border-radius:10px;color:var(--muted); cursor:pointer}
    .small{font-size:0.85rem;color:var(--muted)}

    /* small helpers */
    .muted{color:var(--muted); font-size:0.9rem}
    .hidden{display:none}
    a{color:inherit; text-decoration:none}
  </style>
</head>
<body>
  <div class="container" id="app">
    <header>
      <div class="brand" aria-hidden="false">
        <div class="logo" aria-hidden="true">LB</div>
        <div>
          <h1>La Bodega</h1>
          <p class="lead">Bebidas selectas ‚Ä¢ Entrega segura</p>
        </div>
      </div>

      <div style="display:flex;gap:10px;align-items:center">
        <div id="cartIndicator" aria-live="polite" class="muted">üõí <span id="cartCount">0</span> items</div>
        <button id="viewCartBtn" class="btn" aria-controls="cart">Ver carrito</button>
      </div>
    </header>

    <main class="main" role="main">
      <section aria-label="Cat√°logo">
        <div class="controls">
          <div class="search" role="search">
            <input id="q" type="search" placeholder="Buscar por nombre o tipo..." aria-label="Buscar productos" />
          </div>
          <select id="filterType" class="select" aria-label="Filtrar por tipo">
            <option value="">Todos los tipos</option>
            <option value="Vino">Vino</option>
            <option value="Whisky">Whisky</option>
            <option value="Cerveza">Cerveza</option>
            <option value="Licor">Licor</option>
          </select>
          <select id="sort" class="select" aria-label="Ordenar">
            <option value="popular">M√°s populares</option>
            <option value="price-asc">Precio: menor ‚Üí mayor</option>
            <option value="price-desc">Precio: mayor ‚Üí menor</option>
          </select>
        </div>

        <div id="grid" class="grid" aria-live="polite" aria-atomic="true">
          <!-- tarjetas generadas por JS -->
        </div>

      </section>

      <aside id="cart" class="cart" aria-label="Carrito de compras">
        <h2>Carrito</h2>
        <div id="cartList" class="cart-list" role="list"></div>

        <div class="total">
          <div>Total</div>
          <div id="subtotal">$0.00</div>
        </div>

        <button id="checkoutBtn" class="checkout" aria-disabled="false">Finalizar compra</button>

        <p class="small" style="margin-top:10px">Pago simulado ‚Äî implementa integraci√≥n con pasarela en backend.</p>
      </aside>
    </main>

    <footer>
      <div>‚õ≥ Entregas en CABA y GBA ‚Ä¢ Atenci√≥n al cliente: <a href="mailto:info@labodega.example">info@labodega.example</a></div>
      <div style="margin-top:8px" class="small">Venta solo a mayores de edad. Identificaci√≥n obligatoria al momento de la entrega.</div>
    </footer>
  </div>

  <!-- Modal verificaci√≥n de edad -->
  <div id="ageModal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="ageTitle">
    <div class="modal">
      <h3 id="ageTitle">¬øEres mayor de 18 a√±os?</h3>
      <p>Esta tienda vende bebidas alcoh√≥licas. Debes ser mayor de edad seg√∫n la ley de tu pa√≠s para continuar.</p>
      <div class="btns">
        <button id="confirmAge" class="btn">S√≠, tengo 18+</button>
        <button id="denyAge" class="btn-ghost">No, salir</button>
      </div>
      <p class="small" style="margin-top:12px">Nota: esto es una verificaci√≥n inicial en cliente. Implementa una verificaci√≥n robusta en tu servidor y en la entrega.</p>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    /***********************
     * Datos de ejemplo (ed√≠talos)
     ***********************/
    const PRODUCTS = [
      {
        id: 'vino-malbec-750',
        name: 'Malbec Reserva 750ml',
        type: 'Vino',
        price: 1890,
        img: 'https://images.unsplash.com/photo-1528825871115-3581a5387919?w=800&q=60'
      },
      {
        id: 'whisky-12-700',
        name: 'Whisky 12 a√±os 700ml',
        type: 'Whisky',
        price: 7590,
        img: 'https://images.unsplash.com/photo-1516728778615-2d590ea1856f?w=800&q=60'
      },
      {
        id: 'cerveza-artesanal-500',
        name: 'Cerveza Artesanal 500ml (pack x6)',
        type: 'Cerveza',
        price: 2990,
        img: 'https://images.unsplash.com/photo-1517677208171-0bc6725a3e60?w=800&q=60'
      },
      {
        id: 'licor-crema-700',
        name: 'Crema Licor 700ml',
        type: 'Licor',
        price: 4390,
        img: 'https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?w=800&q=60'
      },
      {
        id: 'vino-tinto-375',
        name: 'Tinto Mini 375ml',
        type: 'Vino',
        price: 850,
        img: 'https://images.unsplash.com/photo-1543362906-acfc16c67564?w=800&q=60'
      },
      {
        id: 'whisky-8-700',
        name: 'Whisky 8 a√±os Edici√≥n',
        type: 'Whisky',
        price: 5120,
        img: 'https://images.unsplash.com/photo-1544025162-d76694265947?w=800&q=60'
      }
    ];

    /***********************
     * Estado y utilidades
     ***********************/
    const $ = selector => document.querySelector(selector);
    const $$ = selector => document.querySelectorAll(selector);

    // carrito en memoria/localStorage
    let cart = JSON.parse(localStorage.getItem('labodega_cart') || '{}');

    const saveCart = () => {
      localStorage.setItem('labodega_cart', JSON.stringify(cart));
      updateCartUI();
    };

    // formatea monedas (ARS)
    const fmt = v => {
      return v.toLocaleString('es-AR', { style: 'currency', currency: 'ARS' });
    };

    /***********************
     * Render cat√°logo
     ***********************/
    function renderProducts(list){
      const grid = $('#grid');
      grid.innerHTML = '';
      if(list.length === 0){
        grid.innerHTML = '<div class="muted">No se encontraron productos.</div>';
        return;
      }
      list.forEach(p => {
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="thumb" style="background-image:url('${p.img}')" role="img" aria-label="${p.name}"></div>
          <div class="meta">
            <div class="title">${p.name}</div>
            <div class="tag">${p.type} ‚Ä¢ 750 ml aprox.</div>
            <div class="price">${fmt(p.price)}</div>
            <div class="actions">
              <button class="add" data-id="${p.id}">Agregar</button>
              <button class="btn" data-id="${p.id}" aria-label="Ver detalles">Detalles</button>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });
    }

    /***********************
     * Filtros y b√∫squeda
     ***********************/
    function applyFilters(){
      const q = $('#q').value.trim().toLowerCase();
      const type = $('#filterType').value;
      const sort = $('#sort').value;

      let list = PRODUCTS.filter(p => {
        const matchQ = q === '' || p.name.toLowerCase().includes(q) || p.type.toLowerCase().includes(q);
        const matchType = !type || p.type === type;
        return matchQ && matchType;
      });

      if(sort === 'price-asc') list.sort((a,b)=>a.price-b.price);
      else if(sort === 'price-desc') list.sort((a,b)=>b.price-a.price);
      else list = list; // popular = original order

      renderProducts(list);
    }

    /***********************
     * Carrito
     ***********************/
    function addToCart(id, qty = 1){
      const product = PRODUCTS.find(p=>p.id===id);
      if(!product) return;
      if(!cart[id]) cart[id] = { ...product, qty: 0 };
      cart[id].qty += qty;
      saveCart();
    }

    function removeFromCart(id){
      delete cart[id];
      saveCart();
    }

    function changeQty(id, newQty){
      if(newQty <= 0) { removeFromCart(id); return; }
      if(cart[id]) cart[id].qty = newQty;
      saveCart();
    }

    function updateCartUI(){
      const list = $('#cartList');
      list.innerHTML = '';
      const entries = Object.values(cart);
      let subtotal = 0;
      entries.forEach(item => {
        subtotal += item.price * item.qty;
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `
          <div class="ci-thumb" style="background-image:url('${item.img}')" aria-hidden="true"></div>
          <div class="ci-meta">
            <div style="display:flex;justify-content:space-between;gap:10px">
              <div style="font-weight:
